# Быстрый старт: Авторизация

## Первый запуск

### Способ 1: Через bat-файл (рекомендуется для Windows)

Дважды кликните на файл `start_visualization_app.bat` или запустите из командной строки:
```cmd
start_visualization_app.bat
```

### Способ 2: Вручную

1. Откройте командную строку в папке проекта
2. Активируйте виртуальное окружение:
   ```cmd
   venv\Scripts\activate.bat
   ```
3. Запустите приложение:
   ```cmd
   streamlit run project_visualization_app.py --server.port 8501 --server.address localhost
   ```

### Доступ к приложению

После запуска откройте в браузере: **http://localhost:8501**

2. При первом запуске создаётся база данных `users.db`. Дефолтный суперадминистратор создаётся только при заданных переменных окружения `DEFAULT_ADMIN_USERNAME` и `DEFAULT_ADMIN_PASSWORD` (см. `.env.example`).

3. При открытии приложения вы будете перенаправлены на страницу авторизации (`pages/login.py`)

## Вход в систему

1. Введите логин и пароль
2. После успешной авторизации откроется главная страница с отчетами

## Доступ к настройкам

1. Войдите как администратор или суперадминистратор
2. В боковом меню нажмите на иконку ⚙️ (колесико)
3. Откроется административная панель

## Восстановление пароля

1. На странице авторизации нажмите "Забыли пароль?"
2. Выберите вкладку "По имени пользователя" и введите имя пользователя
3. Скопируйте созданный токен
4. Перейдите на вкладку "По токену" и вставьте токен
5. Введите новый пароль (минимум 6 символов)

## Создание новых пользователей

1. Войдите как администратор
2. Откройте административную панель (⚙️)
3. Перейдите на вкладку "Управление пользователями"
4. Заполните форму и нажмите "Добавить пользователя"

## Роли пользователей

- **Суперадминистратор** / **Администратор**: доступ к настройкам и отчетам
- **Менеджер** / **Аналитик**: доступ только к отчетам

## Структура файлов

```
bi-analytics/
├── auth.py                    # Модуль авторизации
├── pages/
│   ├── login.py              # Страница авторизации
│   └── admin.py              # Административная панель
├── project_visualization_app.py  # Главное приложение
└── users.db                  # База данных (создается автоматически)
```

## Примечания

- База данных `users.db` создается автоматически в директории приложения
- Все пароли хранятся в виде SHA-256 хешей
- Токены восстановления пароля действительны 1 час
- Для продакшн-версии рекомендуется настроить отправку email для восстановления пароля

